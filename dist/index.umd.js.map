{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 616c6df84e2e399f034b","webpack:///./~/rtttl-parse/dist/index.js","webpack:///./src/index.js"],"names":["rtttlParse","require","module","exports","play","stop","shouldStop","rtttl","parsedRtttl","parse","audioCtx","AudioContext","webkitAudioContext","_playMelody","melody","err","alert","osc","createOscillator","type","start","length","note","frequency","value","connect","destination","setTimeout","disconnect","slice","duration"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,GAAG;;AAEH,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;;AAEA,2DAA2D,EAAE;AAC7D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;ACnNA,IAAMA,aAAa,mBAAAC,CAAQ,CAAR,CAAnB;;AAEAC,OAAOC,OAAP,GAAiB;AACfC,YADe;AAEfC;AAFe,CAAjB;;AAKA,IAAIC,aAAa,KAAjB;;AAEA,SAASF,IAAT,CAAcG,KAAd,EAAqB;;AAEnB,MAAI;AACF,QAAMC,cAAcR,WAAWS,KAAX,CAAiBF,KAAjB,CAApB;AACA,QAAMG,WAAc,KAAKC,gBAAgBC,kBAArB,GAApB;AACAC,gBAAYL,YAAYM,MAAxB,EAAgCJ,QAAhC;AACD,GAJD,CAIE,OAAMK,GAAN,EAAW;AACXC,UAAMD,GAAN;AACD;AAEF;;AAED,SAASV,IAAT,GAAgB;AACdC,eAAa,IAAb;AACD;;AAED,SAASO,WAAT,CAAqBC,MAArB,EAA6BJ,QAA7B,EAAuC;;AAErC,MAAIJ,UAAJ,EAAgB;AACdA,iBAAa,KAAb;AACA;AACD;;AAED,MAAMW,MAAMP,SAASQ,gBAAT,EAAZ;AACMD,MAAIE,IAAJ,GAAW,UAAX;AACAF,MAAIG,KAAJ,CAAU,CAAV;;AAEN,MAAIN,OAAOO,MAAP,KAAkB,CAAtB,EAAyB;AACvB;AACD;;AAED,MAAMC,OAAOR,OAAO,CAAP,CAAb;;AAEAG,MAAIM,SAAJ,CAAcC,KAAd,GAAsBF,KAAKC,SAA3B;AACAN,MAAIQ,OAAJ,CAAYf,SAASgB,WAArB;;AAEAC,aAAW,YAAM;AACfV,QAAIW,UAAJ,CAAelB,SAASgB,WAAxB;AACAb,gBAAYC,OAAOe,KAAP,CAAa,CAAb,CAAZ,EAA6BnB,QAA7B,EAAuCO,GAAvC;AACD,GAHD,EAGGK,KAAKQ,QAHR;AAKD,C","file":"index.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rtttlPlay\"] = factory();\n\telse\n\t\troot[\"rtttlPlay\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 616c6df84e2e399f034b","\"use strict\";\n\nmodule.exports = {\n  parse: parse,\n  getName: getName,\n  getDefaults: getDefaults,\n  getData: getData\n};\n\n/**\n * Parse RTTTL\n *\n * @param {string} rtttl - RTTTL String\n * @returns {object} - An object specifying frequency and duration for each note\n */\nfunction parse(rtttl) {\n\n  var REQUIRED_SECTIONS_NUM = 3;\n  var SECTIONS = rtttl.split(':');\n\n  if (SECTIONS.length !== REQUIRED_SECTIONS_NUM) {\n    throw new Error('Invalid RTTTL file.');\n  }\n\n  var NAME = getName(SECTIONS[0]);\n  var DEFAULTS = getDefaults(SECTIONS[1]);\n  var MELODY = getData(SECTIONS[2], DEFAULTS);\n\n  return {\n    name: NAME,\n    defaults: DEFAULTS,\n    melody: MELODY\n  };\n}\n\n/**\n * Get ring tone name\n *\n * @param {string} name\n * @returns {string}\n */\nfunction getName(name) {\n\n  var MAX_LENGTH = 10;\n\n  if (name.length > MAX_LENGTH) {\n    console.warn('Tune name should not exceed 10 characters.');\n  }\n\n  if (!name) {\n    return 'Unknown';\n  }\n\n  return name;\n}\n\n/**\n * Get duration, octave and BPM\n *\n * @param {string} defaults\n * @returns {object}\n */\nfunction getDefaults(defaults) {\n\n  var VALUES = defaults.split(',');\n\n  var VALUES_ARR = VALUES.map(function (value) {\n\n    if (value === '') {\n      return {};\n    }\n\n    var KEY_VAL = value.split('=');\n\n    if (KEY_VAL.length !== 2) {\n      throw new Error('Invalid setting ' + value);\n    }\n\n    var KEY = KEY_VAL[0];\n    var VAL = KEY_VAL[1];\n\n    var ALLOWED_DURATION = ['1', '2', '4', '8', '16', '32'];\n    var ALLOWED_OCTAVE = ['4', '5', '6', '7'];\n    var ALLOWED_BPM = ['25', '28', '31', '35', '40', '45', '50', '56', '63', '70', '80', '90', '100', '112', '125', '140', '160', '180', '200', '225', '250', '285', '320', '355', '400', '450', '500', '565', '635', '715', '800', '900'];\n\n    switch (KEY) {\n      case 'd':\n        if (ALLOWED_DURATION.indexOf(VAL) !== -1) {\n          return { duration: VAL };\n        } else {\n          throw new Error('Invalid duration ' + VAL);\n        }\n      case 'o':\n        if (ALLOWED_OCTAVE.indexOf(VAL) === -1) {\n          console.warn('Invalid octave ' + VAL);\n        }\n        return { octave: VAL };\n      case 'b':\n        if (ALLOWED_BPM.indexOf(VAL) === -1) {\n          console.warn('Invalid BPM ' + VAL);\n        }\n        return { bpm: VAL };\n    }\n  });\n\n  var VALUES_OBJ = _toObject({}, VALUES_ARR);\n\n  var DEFAULT_VALUES = {\n    duration: '4',\n    octave: '6',\n    bpm: '63'\n  };\n\n  return Object.assign(DEFAULT_VALUES, VALUES_OBJ);\n}\n\n/**\n * Convert an array of objects into an object\n *\n * @param {object} obj\n * @param {Array} arr\n * @returns {object}\n * @private\n */\nfunction _toObject(obj, arr) {\n\n  if (arr.length === 0) {\n    return obj;\n  }\n\n  var newObj = Object.assign(obj, arr[0]);\n\n  return _toObject(newObj, arr.slice(1));\n}\n\n/**\n * Get the parsed melody data\n *\n * @param {string} melody\n * @param {object} defaults\n * @returns {Array}\n */\nfunction getData(melody, defaults) {\n\n  var NOTES = melody.split(',');\n  var BEAT_EVERY = 60000 / parseInt(defaults.bpm);\n\n  return NOTES.map(function (note) {\n\n    var NOTE_REGEX = /(1|2|4|8|16|32|64)?((?:[a-g]|h|p)#?){1}(\\.?)(4|5|6|7)?/;\n    var NOTE_PARTS = note.match(NOTE_REGEX);\n\n    var NOTE_DURATION = NOTE_PARTS[1] || parseInt(defaults.duration);\n    var NOTE = NOTE_PARTS[2] === 'h' ? 'b' : NOTE_PARTS[2];\n    var NOTE_DOTTED = NOTE_PARTS[3] === '.';\n    var NOTE_OCTAVE = NOTE_PARTS[4] || parseInt(defaults.octave);\n\n    return {\n      note: NOTE,\n      duration: _calculateDuration(BEAT_EVERY, parseFloat(NOTE_DURATION), NOTE_DOTTED),\n      frequency: _calculateFrequency(NOTE, NOTE_OCTAVE)\n    };\n  });\n}\n\n/**\n * Calculate the frequency of a note\n *\n * @param {string} note\n * @param {number} octave\n * @returns {number}\n * @private\n */\nfunction _calculateFrequency(note, octave) {\n\n  if (note === 'p') {\n    return 0;\n  }\n\n  var C4 = 261.63;\n  var TWELFTH_ROOT = Math.pow(2, 1 / 12);\n  var N = _calculateSemitonesFromC4(note, octave);\n  var FREQUENCY = C4 * Math.pow(TWELFTH_ROOT, N);\n\n  return Math.round(FREQUENCY * 1e1) / 1e1;\n}\n\nfunction _calculateSemitonesFromC4(note, octave) {\n\n  var NOTE_ORDER = ['c', 'c#', 'd', 'd#', 'e', 'f', 'f#', 'g', 'g#', 'a', 'a#', 'b'];\n  var MIDDLE_OCTAVE = 4;\n  var SEMITONES_IN_OCTAVE = 12;\n\n  var OCTAVE_JUMP = (octave - MIDDLE_OCTAVE) * SEMITONES_IN_OCTAVE;\n\n  return NOTE_ORDER.indexOf(note) + OCTAVE_JUMP;\n}\n\n/**\n * Calculate the duration a note should be played\n *\n * @param {number} beatEvery\n * @param {number} noteDuration\n * @param {boolean} isDotted\n * @returns {number}\n * @private\n */\nfunction _calculateDuration(beatEvery, noteDuration, isDotted) {\n  var DURATION = beatEvery * 4 / noteDuration;\n  var PROLONGED = isDotted ? DURATION / 2 : 0;\n  return DURATION + PROLONGED;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/rtttl-parse/dist/index.js\n// module id = 0\n// module chunks = 0","const rtttlParse = require('rtttl-parse');\n\nmodule.exports = {\n  play,\n  stop\n};\n\nlet shouldStop = false;\n\nfunction play(rtttl) {\n\n  try {\n    const parsedRtttl = rtttlParse.parse(rtttl);\n    const audioCtx    = new (AudioContext || webkitAudioContext)();\n    _playMelody(parsedRtttl.melody, audioCtx);\n  } catch(err) {\n    alert(err);\n  }\n\n}\n\nfunction stop() {\n  shouldStop = true;\n}\n\nfunction _playMelody(melody, audioCtx) {\n\n  if (shouldStop) {\n    shouldStop = false;\n    return;\n  }\n\n  const osc = audioCtx.createOscillator();\n        osc.type = 'triangle';\n        osc.start(0);\n\n  if (melody.length === 0) {\n    return;\n  }\n\n  const note = melody[0];\n\n  osc.frequency.value = note.frequency;\n  osc.connect(audioCtx.destination);\n\n  setTimeout(() => {\n    osc.disconnect(audioCtx.destination);\n    _playMelody(melody.slice(1), audioCtx, osc);\n  }, note.duration);\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}